---
name: genericCPEReservation
spec:
  build:
    testing_cpe_aruns7:
      info:
        element: magnesium
        repository: magnesium-patch3
        version: 12.3.1.103
      type: element
  resource_requirements:
    filter:
      match_attributes:
        location: WIC
      match_metadata:
        lab: SF_Sustaining
        resource_pool: CPE_WIC
    resource_types:
      storage_node:
      - count: 4
        filter:
          match_expressions:
          - attribute_name: model
            operator: In
            values:
            - H610S-1
            - H610S-2
        name: storageNode
  setup:
    stages:
    - name: setupNodesStage
      tasks:
      - config:
          rtfi_params:
            sf_bond_mode_10g: LACP
            sf_inplace: false
          skip_post_rtfi_network: false
        name: setupStorageNodesTask
        refs:
          build: thisBuild
          node: storageNodes
        type: provision_storage_node
    - name: createClusterStage
      tasks:
      - config:
          cluster_name: TestinClusterCPE
        name: createStorageClusterTask
        refs:
          cluster_mvip_name: managementVip
          cluster_svip_name: storageVip
          provision_tasks:
          - setupStorageNodesTask
        type: create_storage_cluster
type: Reservation